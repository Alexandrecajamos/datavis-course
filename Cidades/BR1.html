<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
  <title>Visão geral</title>

            <link  rel="stylesheet" href="css/starter-template.css">
            <link rel="stylesheet" href="css/dc.css">
            <link rel="stylesheet" href="css/styles.css">
            <script src="https://d3js.org/topojson.v1.min.js"></script>
            <script src="https://d3js.org/queue.v1.min.js"></script>
            <script src="js/crossfilter.js" charset="utf-8"></script>
            <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
            <script src="js/dc.js" charset="utf-8"></script>
<script src="https://d3js.org/colorbrewer.v1.min.js"></script>

 <link rel="stylesheet" href="css/dc.css">
  <!-- Bootstrap -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!-- Custom styles for this template -->
   
	<style>

	
    #tooltip {
      position: absolute;
      width: 240px;
      height: auto;
      padding: 10px;
      background-color: white;
            -webkit-border-radius: 10px;
            -moz-border-radius: 10px;
      border-radius: 10px;
            -webkit-box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
            -moz-box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
      box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
      pointer-events: none;
    }

    #tooltip.hidden {
        display: none;
    }

    #tooltip p {
      margin: 0;
      font-family: sans-serif;
      font-size: 16px;
      line-height: 20px;
    }
    #IDHmap1991{
      position: absolute;
      margin-left: 30px;
      top: 300px;
    }
    #IDHmap2000{
      position: absolute;
      margin-left: 370px;
      top: 300px;
    }
    #IDHmap2010{
      position: absolute;
      margin-left: 720px;
      top: 300px;
    }
    h4{
      margin-left: 150px;
    }
    #Leg_IDH{
      margin-top: 470px;
    }

    #Leg_GINI{
      margin-top: 450px;
    }
    #IDHh1991{
      position: absolute;
      margin-top: 240px;
    }
    #IDHh2000{
      position: absolute;
      margin-left: 350px;
      margin-top: 240px;
    }

    #IDHh2010{
      position: absolute;
      margin-left: 700px;
      margin-top: 240px;
    }
    #GINIh1991{
      position: absolute;
      margin-top: 240px;
    }

     #GINIh2000{
      position: absolute;
      margin-left: 350px;
      margin-top: 240px;
    }

    #GINIh2010{
      position: absolute;
      margin-left: 700px;
      margin-top: 240px;
    }

     #Rendah1991{
      position: absolute;
      margin-top: 240px;
    }

     #Rendah2000{
      position: absolute;
      margin-left: 350px;
      margin-top: 240px;
    }

    #Rendah2010{
      position: absolute;
      margin-left: 700px;
      margin-top: 240px;
    }

    #GINImap1991{
      position: absolute;
      margin-left: 30px;
      top: 900px;
    }
    #GINImap2000{
      position: absolute;
      margin-left: 370px;
      top: 900px;
    }
    #GINImap2010{
      position: absolute;
      margin-left: 700px;
      top: 1500px;
    }


    #RENDAmap1991{
      position: absolute;
      margin-left: 30px;
      top: 1400px;
    }
    #RENDAmap2000{
      position: absolute;
      margin-left: 370px;
      top: 1400px;
    }
    #RENDAmap2010{
      position: absolute;
      margin-left: 700px;
      top: 1400px;
    }

	</style>
</head>
<body>
        <nav class="navbar navbar-inverse navbar-fixed-top">
                <div class="container">
                  <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                      <span class="sr-only">Toggle navigation</span>
                      <span class="icon-bar"></span>
                      <span class="icon-bar"></span>
                      <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#">Cidades Brasileiras</a>
                  </div>
                  <div id="navbar" class="collapse navbar-collapse">
                    <ul class="nav navbar-nav">
                      <li class="active"><a href="/datavis-course/Cidades/BR1.html">Visão Geral</a></li>
                      <li><a href="/datavis-course/Cidades/cidades.html">Gestores Municipais</a></li>
                      <li><a href="#contact">Minha cidade</a></li>
                      <li><a href="#contact">Sobre o Projeto</a></li>
                    </ul>
                  </div><!--/.nav-collapse -->
                </div>
              </nav>
  <div id="container-fluid" class="container">
    <header>
	   <h1>Visão geral das cidades Brasileiras</h1>

   </header>
      <p> <h3>Esta visualização...</h3> ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- <a href="http://www.atlasbrasil.org.br">aqui</a>.</p> 
    

   <div id="IDHmap1991"><h4>IDHM 1991</h4></div>
   <div id="IDHmap2000"><h4>IDHM 2000</h4></div>
   <div id="IDHmap2010"><h4>IDHM 2010</h4></div>
   <div id= "IDHh1991"></div>
    <div id= "IDHh2000"></div>
    <div id= "IDHh2010"></div>

  <select id="selectElementId">
    <option id = "S" value="start" selected="selected">-------</option>
    <option id = "MA" value="Muito Alto">Muito Alto</option>
    <option id = "A" value="Alto">Alto</option>
    <option id = "M" value="Medio">Medio</option>
    <option id = "B" value="Baixo">Baixo</option>
    <option id = "MB" value="Muito Baixo">Muito Baixo</option>
  </select>

   <div id = "Leg_IDH">

   <p> <h3>Evolução do IDH</h3> "O IDHM brasileiro considera as mesmas três dimensões do IDH Global – longevidade, educação e renda, mas vai além: adequa a metodologia global ao contexto brasileiro e à disponibilidade de indicadores nacionais. Embora meçam os mesmos fenômenos, os indicadores levados em conta no IDHM são mais adequados para avaliar o desenvolvimento dos municípios e regiões metropolitanas brasileiras." Conheça o Atlas do Desenvolvimento Humano no Brasil <a href="http://www.atlasbrasil.org.br">aqui</a>.</p> 
    </div>
  

 <div id="GINImap1991"><h4>GINI 1991</h4></div>
 <div id="GINImap2000"><h4>GINI 2000</h4></div>
 <div id="GINImap2010"><h4>GINI 2010</h4></div>
 <div id= "GINIh1991"></div>
<div id= "GINIh2000"></div>
<div id= "GINIh2010"></div>

 <div id = "Leg_GINI">

   <p> <h3>Evolução do indice GINI</h3> "------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ <a href="http://www.atlasbrasil.org.br">aqui</a>.</p> 
    </div>
  

 <div id="RENDAmap1991"><h4>Renda pc 1991</h4></div>
 <div id="RENDAmap2000"><h4>Renda pc 2000</h4></div>
 <div id="RENDAmap2010"><h4>Renda pc 2010</h4></div>
 <div id= "Rendah1991"></div>
  <div id= "Rendah2000"></div>
  <div id= "Rendah2010"></div>

    <div id="tooltip" class="hidden">
     <p><span id="CondNametaxa"></span></p>
   <p><span id="taxa"></span></p>
  </div>
 
  <script src="js/visMap.js"></script>
  <script src="js/filter.js"></script>

<script>


  var width = 350,
      height = 350;



  let IDHbrewerColors = colorbrewer.Blues[5];
  let IDHquantize = d3.scale.linear()
    .domain([0,0.5,0.6,0.7,0.8,1])
    .range(IDHbrewerColors);

 let GINIbrewerColors = colorbrewer.Blues[4];
 let GINIquantize = d3.scale.linear()
    .domain([0,0.25,0.5,0.75,1])
    .range(GINIbrewerColors);

  let RendabrewerColors = colorbrewer.Blues[4];
  let Rendaquantize = d3.scale.linear()
    .domain([0,250,500,750,1500])
    .range(RendabrewerColors);


  

  var rateByName1991 = d3.map();
  var rateByName2000 = d3.map();
  var rateByName2010 = d3.map();


  var rateByName1991GINI = d3.map();
  var rateByName2000GINI = d3.map();
  var rateByName2010GINI = d3.map();

  var rateByName1991RENDA = d3.map();
  var rateByName2000RENDA = d3.map();
  var rateByName2010RENDA = d3.map();


</script>

<script type="text/javascript">

  var his1 = dc.barChart("#IDHh1991");
  var his2 = dc.barChart("#IDHh2000");
  var his3 = dc.barChart("#IDHh2010");


            d3.csv("data/AtlasIDHM1991.csv", function (data) {
              
              data.forEach(function(d) {
                d.IDH = 100*d.IDHM1991;

            });
          
              var facts = crossfilter(data);
              var IDHDimention = facts.dimension(function(d){
                  return d.IDH;
              });
              var IDHGroup = IDHDimention.group();


              his1
              .width(200)
              .height(200)
              .margins({top: 10, right: 10, bottom: 30, left:20})
              .dimension(IDHDimention)
              .group(IDHGroup)
              .transitionDuration(500)
              .centerBar(true)
              .gap(56)
              .x(d3.scale.linear().domain([1,100]))
              .y(d3.scale.linear().domain([1,50]));
                
              dc.renderAll();
  
            });


            d3.csv("data/AtlasIDHM2000.csv", function (data) {
              
              data.forEach(function(d) {
                d.IDH2000 = 100*d.IDHM2000;

            });
          
              var facts = crossfilter(data);
              var IDH2000Dimention = facts.dimension(function(d){
                  return d.IDH2000;
              });
              var IDH2000Group = IDH2000Dimention.group();


              his2
              .width(200)
              .height(200)
              .margins({top: 10, right: 10, bottom: 30, left:20})
              .dimension(IDH2000Dimention)
              .group(IDH2000Group)
              .transitionDuration(500)
              .centerBar(true)
              .gap(56)
              .x(d3.scale.linear().domain([1,100]))
              .y(d3.scale.linear().domain([1,50]));
                
              dc.renderAll();
  
            });


            d3.csv("data/AtlasIDHM2010.csv", function (data) {
              
              data.forEach(function(d) {
                d.IDH = 100*d.IDHM2010;

            });
          
              var facts = crossfilter(data);
              var IDH2010Dimention = facts.dimension(function(d){
                  return d.IDH;
              });
              var IDH2010Group = IDH2010Dimention.group();


              his3
              .width(200)
              .height(200)
              .margins({top: 10, right: 10, bottom: 30, left:30})
              .dimension(IDH2010Dimention)
              .group(IDH2010Group)
              .transitionDuration(500)
              .centerBar(true)
              .gap(56)
              .x(d3.scale.linear().domain([1,100]))
              .y(d3.scale.linear().domain([1,50]));

              dc.renderAll();
  
            });

  </script>

  <script type="text/javascript">

  var his1GINI = dc.barChart("#GINIh1991");
  var his2GINI = dc.barChart("#GINIh2000");
  var his3GINI = dc.barChart("#GINIh2010");


            d3.csv("data/AtlasGINI.csv", function (data) {
              
              data.forEach(function(d) {
                d.H1991 = 100*d.Gini1991;
                d.H2000 = 100*d.Gini2000;
                d.H2010 = 100*d.Gini2010;

            });
          
              var facts = crossfilter(data);
              var DIM_1991 = facts.dimension(function(d){
                  return d.H1991;
              });
              var Group_1991 = DIM_1991.group();

              var DIM_2000 = facts.dimension(function(d){
                return d.H2000;
              });

              var Group_2000 = DIM_2000.group();

              var DIM_2010 = facts.dimension(function(d){
                return d.H2010;
              });

              var Group_2010 = DIM_2010.group();


              his1GINI
              .width(200)
              .height(200)
              .margins({top: 10, right: 10, bottom: 30, left:30})
              .dimension(DIM_1991)
              .group(Group_1991)
              .transitionDuration(500)
              .centerBar(true)
              .gap(56)
              .x(d3.scale.linear().domain([1,100]))
              //.elasticY(true)
              .y(d3.scale.linear().domain([1,400]));
              ;  

               his2GINI
              .width(200)
              .height(200)
              .margins({top: 10, right: 10, bottom: 30, left:30})
              .dimension(DIM_2000)
              .group(Group_2000)
              .transitionDuration(500)
              .centerBar(true)
              .gap(56)
              .x(d3.scale.linear().domain([1,100]))
              //.elasticY(true)
              .y(d3.scale.linear().domain([1,400]));
              ;  

               his3GINI
              .width(200)
              .height(200)
              .margins({top: 10, right: 10, bottom: 30, left:30})
              .dimension(DIM_2010)
              .group(Group_2010)
              .transitionDuration(500)
              .centerBar(true)
              .gap(56)
              .x(d3.scale.linear().domain([1,100]))
              //.elasticY(true)
              .y(d3.scale.linear().domain([1,400]));
              ;  


              dc.renderAll();
  
            });

  </script>

   <script type="text/javascript">

  var his1Renda = dc.barChart("#Rendah1991");
  var his2Renda = dc.barChart("#Rendah2000");
  var his3Renda = dc.barChart("#Rendah2010");


            d3.csv("data/AtlasRENDA.csv", function (data) {
              
              data.forEach(function(d) {
                d.H1991 = d.Renda1991;
                d.H2000 = d.Renda2000;
                d.H2010 = d.Renda2010;

            });
          
              var facts = crossfilter(data);
              var DIM_1991 = facts.dimension(function(d){
                  return d.H1991;
              });
              var Group_1991 = DIM_1991.group();

              var DIM_2000 = facts.dimension(function(d){
                return d.H2000;
              });

              var Group_2000 = DIM_2000.group();

              var DIM_2010 = facts.dimension(function(d){
                return d.H2010;
              });

              var Group_2010 = DIM_2010.group();


              his1Renda
              .width(200)
              .height(200)
              .margins({top: 10, right: 10, bottom: 30, left:30})
              .dimension(DIM_1991)
              .group(Group_1991)
              .transitionDuration(500)
              .centerBar(true)
              .gap(56)
              .x(d3.scale.linear().domain([1,1000]))
              .elasticY(true)
              //.y(d3.scale.linear().domain([1,100]));
              ;  

               his2Renda
              .width(200)
              .height(200)
              .margins({top: 10, right: 10, bottom: 30, left:30})
              .dimension(DIM_2000)
              .group(Group_2000)
              .transitionDuration(500)
              .centerBar(true)
              .gap(56)
              .x(d3.scale.linear().domain([1,1000]))
              .elasticY(true)
              //.y(d3.scale.linear().domain([1,100]));
              ;  

               his3Renda
              .width(200)
              .height(200)
              .margins({top: 10, right: 10, bottom: 50, left:30})
              .dimension(DIM_2010)
              .group(Group_2010)
              .transitionDuration(500)
              .centerBar(true)
              .gap(56)
              .x(d3.scale.linear().domain([1,1000]))
              .elasticY(true)
              //.y(d3.scale.linear().domain([1,100]));
              ;  


              dc.renderAll();
  
            });

  </script>



<script>


 

  var projection = d3.geo.mercator()
      .center([-10,-30])
      .scale(375);

  var path = d3.geo.path()
      .projection(projection);

  var svg1991 = d3.select("#IDHmap1991").append("svg")
      .attr("width", width)
      .attr("height", height);

  var svg2000 = d3.select("#IDHmap2000").append("svg")
      .attr("width", width)
      .attr("height", height);

  var svg2010 = d3.select("#IDHmap2010").append("svg")
      .attr("width", width)
      .attr("height", height);

  queue()
    .defer(d3.json, "mnmbr.json")
    .defer(d3.csv, "data/AtlasIDHM1991.csv", function(d) { rateByName1991.set(d.name, +d.IDHM1991); })
    .defer(d3.csv, "data/AtlasIDHM2000.csv", function(d) { rateByName2000.set(d.name, +d.IDHM2000); })
    .defer(d3.csv, "data/AtlasIDHM2010.csv", function(d) { rateByName2010.set(d.name, +d.IDHM2010); })
    .await(readq);

    function readq(error, br){

      var x1 = mapBR(svg1991,width,height,path,rateByName1991,500,0, 1);
      var x2 = mapBR(svg2000,width,height,path,rateByName2000,500,330, 1);
      var x3 = mapBR(svg2010,width,height,path,rateByName2010,500,600, 1);

      svg1991 = x1(error,br);
      svg2000 = x2(error,br);
      svg2010 = x3(error,br);


      d3.selectAll("select").on("change", function change() {

        var e = document.getElementById("selectElementId");
        var strUser = e.options[e.selectedIndex].value;

        svg1991 = changeColor(svg1991,rateByName1991,strUser);
        svg2000 = changeColor(svg2000,rateByName2000,strUser);
        svg2010 = changeColor(svg2010,rateByName2010,strUser);

      });
    }

</script>


<script>


  var projection = d3.geo.mercator()
      .center([-10,-30])
      .scale(375);

  var path = d3.geo.path()
      .projection(projection);

  var svg1991GINI = d3.select("#GINImap1991").append("svg")
      .attr("width", width)
      .attr("height", height);

  var svg2000GINI = d3.select("#GINImap1991").append("svg")
      .attr("width", width)
      .attr("height", height);

  var svg2010GINI = d3.select("#GINImap1991").append("svg")
      .attr("width", width)
      .attr("height", height);

  queue()
    .defer(d3.json, "mnmbr.json")
    .defer(d3.csv, "data/AtlasGINI.csv", 
      function(d) { 

        rateByName1991GINI.set(d.Espacialidades, +d.Gini1991);
        rateByName2000GINI.set(d.Espacialidades, +d.Gini2000);
        rateByName2010GINI.set(d.Espacialidades, +d.Gini2010); 
      })
    .await(readq);

    function readq(error, br){

      var x4 = mapBR(svg1991GINI,width,height,path,rateByName1991GINI, 1100, 0, 2);
      var x5 = mapBR(svg2000GINI,width,height,path,rateByName2000GINI, 1100, 330, 2);
      var x6 = mapBR(svg2010GINI,width,height,path,rateByName2010GINI, 1100,600, 2);

      x4(error,br);
      x5(error,br);
      x6(error,br);
    }

</script>

<script>

 
  var projection = d3.geo.mercator()
      .center([-10,-30])
      .scale(375);

  var path = d3.geo.path()
      .projection(projection);

  var svg1991RENDA = d3.select("#RENDAmap1991").append("svg")
      .attr("width", width)
      .attr("height", height);

  var svg2000RENDA = d3.select("#RENDAmap1991").append("svg")
      .attr("width", width)
      .attr("height", height);

  var svg2010RENDA = d3.select("#RENDAmap1991").append("svg")
      .attr("width", width)
      .attr("height", height);

  queue()
    .defer(d3.json, "mnmbr.json")
    .defer(d3.csv, "data/AtlasRENDA.csv", 
      function(d) { 
        rateByName1991RENDA.set(d.Espacialidades, +d.Renda1991);
        rateByName2000RENDA.set(d.Espacialidades, +d.Renda2000);
        rateByName2010RENDA.set(d.Espacialidades, +d.Renda2010); 
      })
    .await(readq);


    function readq(error, br){

      var x1 = mapBR(svg1991RENDA,width,height,path,rateByName1991RENDA, 1600, 0,3);
      var x2 = mapBR(svg2000RENDA,width,height,path,rateByName2000RENDA, 1600, 330,3);
      var x3 = mapBR(svg2010RENDA,width,height,path,rateByName2010RENDA, 1600, 600,3);

      x1(error,br);
      x2(error,br);
      x3(error,br);
    }
    

</script>

  </div>


</body>
</html>